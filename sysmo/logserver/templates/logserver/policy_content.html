{% extends 'base1.html' %} {% block content %}
<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
    <div
        class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
    >
        <h1 class="h2">Policy Content</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
      <div class="btn-group mr-2">
        <button class="btn btn-sm btn-outline-secondary">Share</button>
        <button class="btn btn-sm btn-outline-secondary">Export</button>
      </div>
        </div>
    </div>
    <h2>政策名稱：{{ policy.name }}</h2>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
                <tr>
                    <div class="btn-group" role="group" aria-label="Basic example">
                    <th>
                        <button type="button" class="btn btn-secondary">CPU規則</button>
                    </th>
                    <th>
                        <button type="button" class="btn btn-secondary">Memory規則</button>
                    </th>
                    <th>
                        <button type="button" class="btn btn-secondary">Swap規則</button>
                    </th>
                    <th>
                        <button type="button" class="btn btn-secondary">Disk規則</button>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><p id="cpupolicy-{{policy.id}}">{{policy.cpupolicy}}</p></td>
                    <td>{{ policy.mempolicy }}</td>
                    <td>{{ policy.swappoicy }}</td>
                    <td>{{ policy.diskpolicy }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <h2>套用群組</h2>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
                <tr>
                    <div class="btn-group" role="group" aria-label="Basic example">
                    <th>
                        <button type="button" class="btn btn-secondary">群組名稱</button>
                    </th>
                    </div>
                </tr>
            </thead>
            <tbody>
                <tr>
                    {% for group in groups %}
                        <td>{{ group.name }}</td>
                    {% endfor %}
                </tr>
            </tbody>
        </table>
    </div>
</main>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.7.1/dist/Chart.min.js"></script>
<script type="text/javascript">
    var cpu_policy = document.getElementById("cpupolicy-{{ policy.id }}");
    console.log(cpu_policy)
    console.log("Pass: " + cpu_policy.pass + "\n" + "Warning: " + cpu_policy.warning + "\n" + "Major: " + cpu_policy.major)
    document.getElementById('cpupolicy-{{ policy.id }}').value = JSON.stringify("Pass: " + cpu_policy.pass + "\n" + "Warning: " + cpu_policy.warning + "\n" + "Major: " + cpu_policy.major);
</script>
{% endblock %}
